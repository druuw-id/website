"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[973],{56023:(e,t,r)=>{r.d(t,{Cf:()=>s,bu:()=>n,tG:()=>o});class s extends Error{}s._setPrototypeOf=Object.setPrototypeOf||((e,t)=>(e.__proto__=t,e));const o={MeshInvalidPositionsError:0,UnsupportedTextureError:1e3,GLTFLoaderUnexpectedMagicError:2e3,SceneLoaderError:3e3,LoadFileError:4e3,RequestFileError:4001,ReadFileError:4002};class n extends s{constructor(e,t,r){super(e),this.errorCode=t,this.innerError=r,this.name="RuntimeError",s._setPrototypeOf(this,n.prototype)}}},62240:(e,t,r)=>{r.d(t,{M1:()=>v,Mi:()=>m,NJ:()=>C,VB:()=>R,W$:()=>U,ZP:()=>w,dy:()=>T,eC:()=>x,f2:()=>q,hX:()=>b,my:()=>O,qc:()=>L,rh:()=>F,rz:()=>_,sh:()=>B,wS:()=>S,zU:()=>E});var s=r(86746),o=r(75586),n=r(8092),i=r(38615),a=r(98626),l=r(56023),u=r(12513),c=r(48385),d=r(78631),f=r(80613),h=r(37952),p=r(16473),y=r(35642);const g=new RegExp(/^data:([^,]+\/[^,]+)?;base64,/i);class b extends l.bu{constructor(e,t){super(e,l.tG.LoadFileError),this.name="LoadFileError",l.Cf._setPrototypeOf(this,b.prototype),t instanceof s.u?this.request=t:this.file=t}}class m extends l.bu{constructor(e,t){super(e,l.tG.RequestFileError),this.request=t,this.name="RequestFileError",l.Cf._setPrototypeOf(this,m.prototype)}}class R extends l.bu{constructor(e,t){super(e,l.tG.ReadFileError),this.file=t,this.name="ReadFileError",l.Cf._setPrototypeOf(this,R.prototype)}}const x={DefaultRetryStrategy:a.a.ExponentialBackoff(),BaseUrl:"",CorsBehavior:"anonymous",PreprocessUrl:e=>e,ScriptBaseUrl:"",ScriptPreprocessUrl:e=>e,CleanUrl:e=>e.replace(/#/gm,"%23")},v=(e,t)=>{if((!e||0!==e.indexOf("data:"))&&x.CorsBehavior)if("string"==typeof x.CorsBehavior||x.CorsBehavior instanceof String)t.crossOrigin=x.CorsBehavior;else{const r=x.CorsBehavior(e);r&&(t.crossOrigin=r)}},L={getRequiredSize:null},U=(e,t,r,o,n="",a)=>{const l=d.q.LastCreatedEngine;if("undefined"==typeof HTMLImageElement&&!l?._features.forceBitmapOverHTMLImageElement)return r("LoadImage is only supported in web or BabylonNative environments."),null;let c,f=!1;e instanceof ArrayBuffer||ArrayBuffer.isView(e)?"undefined"!=typeof Blob&&"undefined"!=typeof URL?(c=URL.createObjectURL(new Blob([e],{type:n})),f=!0):c=`data:${n};base64,`+(0,u.EL)(e):e instanceof Blob?(c=URL.createObjectURL(e),f=!0):(c=x.CleanUrl(e),c=x.PreprocessUrl(c));const h=t=>{if(r){const s=c||e.toString();r(`Error while trying to load image: ${0===s.indexOf("http")||s.length<=128?s:s.slice(0,128)+"..."}`,t)}};if(l?._features.forceBitmapOverHTMLImageElement)return E(c,(s=>{l.createImageBitmap(new Blob([s],{type:n}),{premultiplyAlpha:"none",...a}).then((e=>{t(e),f&&URL.revokeObjectURL(c)})).catch((t=>{r&&r("Error while trying to load image: "+e,t)}))}),void 0,o||void 0,!0,((e,t)=>{h(t)})),null;const p=new Image;if(L.getRequiredSize){const t=L.getRequiredSize(e);t.width&&(p.width=t.width),t.height&&(p.height=t.height)}v(c,p);const y=[],g=()=>{y.forEach((e=>{e.target.removeEventListener(e.name,e.handler)})),y.length=0};y.push({target:p,name:"load",handler:()=>{g(),t(p),f&&p.src&&URL.revokeObjectURL(p.src)}}),y.push({target:p,name:"error",handler:e=>{g(),h(e),f&&p.src&&URL.revokeObjectURL(p.src)}}),y.push({target:document,name:"securitypolicyviolation",handler:e=>{if(e.blockedURI!==p.src||"report"===e.disposition)return;g();const t=new Error(`CSP violation of policy ${e.effectiveDirective} ${e.blockedURI}. Current policy is ${e.originalPolicy}`);d.q.UseFallbackTexture=!1,h(t),f&&p.src&&URL.revokeObjectURL(p.src),p.src=""}}),y.forEach((e=>{e.target.addEventListener(e.name,e.handler)}));const b="blob:"===c.substring(0,5),m="data:"===c.substring(0,5),R=()=>{b||m||!s.u.IsCustomRequestAvailable?p.src=c:E(c,((e,t,r)=>{const s=new Blob([e],{type:!n&&r?r:n}),o=URL.createObjectURL(s);f=!0,p.src=o}),void 0,o||void 0,!0,((e,t)=>{h(t)}))};if(!b&&!m&&o&&o.enableTexturesOffline)o.open((()=>{o&&o.loadImage(c,p)}),R);else{if(-1!==c.indexOf("file:")){const e=decodeURIComponent(c.substring(5).toLowerCase());if(i.T.FilesToLoad[e]&&"undefined"!=typeof URL){try{let t;try{t=URL.createObjectURL(i.T.FilesToLoad[e])}catch(r){t=URL.createObjectURL(i.T.FilesToLoad[e])}p.src=t,f=!0}catch(e){p.src=""}return p}}R()}return p},C=(e,t,r,s,o)=>{const i=new FileReader,a={onCompleteObservable:new n.cP,abort:()=>i.abort()};return i.onloadend=()=>a.onCompleteObservable.notifyObservers(a),o&&(i.onerror=()=>{o(new R(`Unable to read ${e.name}`,e))}),i.onload=e=>{t(e.target.result)},r&&(i.onprogress=r),s?i.readAsArrayBuffer(e):i.readAsText(e),a},E=(e,t,r,s,o,a,l)=>{if(e.name)return C(e,t,r,o,a?e=>{a(void 0,e)}:void 0);const u=e;if(-1!==u.indexOf("file:")){let e=decodeURIComponent(u.substring(5).toLowerCase());0===e.indexOf("./")&&(e=e.substring(2));const s=i.T.FilesToLoad[e];if(s)return C(s,t,r,o,a?e=>a(void 0,new b(e.message,e.file)):void 0)}const{match:c,type:d}=w(u);if(c){const e={onCompleteObservable:new n.cP,abort:()=>()=>{}};try{const e=o?_(u):T(u);t(e,void 0,d)}catch(e){a?a(void 0,e):f.V.Error(e.message||"Failed to parse the Data URL")}return h._.SetImmediate((()=>{e.onCompleteObservable.notifyObservers(e)})),e}return B(u,((e,r)=>{t(e,r?.responseURL,r?.getResponseHeader("content-type"))}),r,s,o,a?e=>{a(e.request,new b(e.message,e.request))}:void 0,l)},B=(e,t,r,i,a,l,u)=>{e=x.CleanUrl(e),e=x.PreprocessUrl(e);const c=x.BaseUrl+e;let d=!1;const h={onCompleteObservable:new n.cP,abort:()=>d=!0},p=()=>{let e,n=new s.u,i=null;const p=()=>{n&&(r&&n.removeEventListener("progress",r),e&&n.removeEventListener("readystatechange",e),n.removeEventListener("loadend",y))};let y=()=>{p(),h.onCompleteObservable.notifyObservers(h),h.onCompleteObservable.clear(),r=void 0,e=null,y=null,l=void 0,u=void 0,t=void 0};h.abort=()=>{d=!0,y&&y(),n&&n.readyState!==(XMLHttpRequest.DONE||4)&&n.abort(),null!==i&&(clearTimeout(i),i=null),n=null};const g=e=>{const t=e.message||"Unknown error";l&&n?l(new m(t,n)):f.V.Error(t)},b=f=>{if(n){if(n.open("GET",c),u)try{u(n)}catch(e){return void g(e)}a&&(n.responseType="arraybuffer"),r&&n.addEventListener("progress",r),y&&n.addEventListener("loadend",y),e=()=>{if(!d&&n&&n.readyState===(XMLHttpRequest.DONE||4)){if(e&&n.removeEventListener("readystatechange",e),n.status>=200&&n.status<300||0===n.status&&(!(0,o.BA)()||O())){const e=a?n.response:n.responseText;if(null!==e){try{t&&t(e,n)}catch(e){g(e)}return}}const r=x.DefaultRetryStrategy;if(r){const e=r(c,n,f);if(-1!==e)return p(),n=new s.u,void(i=setTimeout((()=>b(f+1)),e))}const u=new m("Error status: "+n.status+" "+n.statusText+" - Unable to load "+c,n);l&&l(u)}},n.addEventListener("readystatechange",e),n.send()}};b(0)};if(i&&i.enableSceneOffline){const s=e=>{e&&e.status>400?l&&l(e):p()},o=()=>{i&&i.loadFile(x.BaseUrl+e,(e=>{!d&&t&&t(e),h.onCompleteObservable.notifyObservers(h)}),r?e=>{!d&&r&&r(e)}:void 0,s,a)};i.open(o,s)}else p();return h},O=()=>"undefined"!=typeof location&&"file:"===location.protocol,q=e=>g.test(e),w=e=>{const t=g.exec(e);return null===t||0===t.length?{match:!1,type:""}:{match:!0,type:t[0].replace("data:","").replace("base64,","")}};function _(e){return(0,u.yS)(e.split(",")[1])}const T=e=>(0,u.AV)(e.split(",")[1]);let S;y.$._FileToolsLoadImage=U,p.sg.loadFile=E,c.J.loadFile=E;const F=(e,t,r,s,o,n,i,a,l,u)=>{S={DecodeBase64UrlToBinary:e,DecodeBase64UrlToString:t,DefaultRetryStrategy:r.DefaultRetryStrategy,BaseUrl:r.BaseUrl,CorsBehavior:r.CorsBehavior,PreprocessUrl:r.PreprocessUrl,IsBase64DataUrl:s,IsFileURL:o,LoadFile:n,LoadImage:i,ReadFile:a,RequestFile:l,SetCorsBehavior:u},Object.defineProperty(S,"DefaultRetryStrategy",{get:function(){return r.DefaultRetryStrategy},set:function(e){r.DefaultRetryStrategy=e}}),Object.defineProperty(S,"BaseUrl",{get:function(){return r.BaseUrl},set:function(e){r.BaseUrl=e}}),Object.defineProperty(S,"PreprocessUrl",{get:function(){return r.PreprocessUrl},set:function(e){r.PreprocessUrl=e}}),Object.defineProperty(S,"CorsBehavior",{get:function(){return r.CorsBehavior},set:function(e){r.CorsBehavior=e}})};F(_,T,x,q,O,E,U,C,B,v)},38615:(e,t,r)=>{r.d(t,{T:()=>s});class s{}s.FilesToLoad={}},30948:(e,t,r)=>{function s(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(e=>{const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}r.d(t,{S:()=>o,z:()=>s});const o={RandomId:s}},93757:(e,t,r)=>{r.d(t,{n:()=>n});var s=r(80613),o=r(6740);class n{static Instantiate(e){if(this.RegisteredExternalClasses&&this.RegisteredExternalClasses[e])return this.RegisteredExternalClasses[e];const t=(0,o.n9)(e);if(t)return t;s.V.Warn(e+" not found, you may have missed an import.");const r=e.split(".");let n=window||this;for(let e=0,t=r.length;e<t;e++)n=n[r[e]];return"function"!=typeof n?null:n}}n.RegisteredExternalClasses={}},98626:(e,t,r)=>{r.d(t,{a:()=>s});class s{static ExponentialBackoff(e=3,t=500){return(r,s,o)=>0!==s.status||o>=e||-1!==r.indexOf("file:")?-1:Math.pow(2,o)*t}}},12513:(e,t,r)=>{r.d(t,{AV:()=>a,EL:()=>i,LW:()=>u,Tq:()=>n,UH:()=>o,jq:()=>s,nQ:()=>c,yS:()=>l});const s=(e,t)=>e.endsWith(t),o=(e,t)=>!!e&&e.startsWith(t),n=e=>{if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(e);let t="";for(let r=0;r<e.byteLength;r++)t+=String.fromCharCode(e[r]);return t},i=e=>{const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let r,s,o,n,i,a,l,u="",c=0;const d=ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e);for(;c<d.length;)r=d[c++],s=c<d.length?d[c++]:Number.NaN,o=c<d.length?d[c++]:Number.NaN,n=r>>2,i=(3&r)<<4|s>>4,a=(15&s)<<2|o>>6,l=63&o,isNaN(s)?a=l=64:isNaN(o)&&(l=64),u+=t.charAt(n)+t.charAt(i)+t.charAt(a)+t.charAt(l);return u},a=e=>atob(e),l=e=>{const t=a(e),r=t.length,s=new Uint8Array(new ArrayBuffer(r));for(let e=0;e<r;e++)s[e]=t.charCodeAt(e);return s.buffer},u=(e,t)=>{let r=String(e);for(;r.length<t;)r="0"+r;return r},c={EndsWith:s,StartsWith:o,Decode:n,EncodeArrayBufferToBase64:i,DecodeBase64ToString:a,DecodeBase64ToBinary:l,PadNumber:u}},82809:(e,t,r)=>{function s(e){let t=1;do{t*=2}while(t<e);return t===e}function o(e,t,r){return e*(1-r)+t*r}function n(e){const t=i(e),r=a(e);return t-e>e-r?r:t}function i(e){return e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,++e}function a(e){return e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,(e|=e>>16)-(e>>1)}function l(e,t,r=2){let s;switch(r){case 1:s=a(e);break;case 2:s=n(e);break;default:s=i(e)}return Math.min(s,t)}r.d(t,{C4:()=>a,L8:()=>s,OG:()=>n,R:()=>l,zF:()=>o})},6740:(e,t,r)=>{r.d(t,{Uu:()=>i,Y5:()=>o,n9:()=>n});const s={};function o(e,t){s[e]=t}function n(e){return s[e]}function i(e){for(const t in s)if(e instanceof s[t]&&!t.includes("Abstract"))return t;return"Unknown"}},86746:(e,t,r)=>{r.d(t,{u:()=>s});class s{constructor(){this._xhr="undefined"!=typeof _native&&_native.XMLHttpRequest?new _native.XMLHttpRequest:new XMLHttpRequest,this._requestURL=""}static get IsCustomRequestAvailable(){return Object.keys(s.CustomRequestHeaders).length>0||s.CustomRequestModifiers.length>0}get requestURL(){return this._requestURL}_injectCustomRequestHeaders(){if(!this._shouldSkipRequestModifications(this._requestURL))for(const e in s.CustomRequestHeaders){const t=s.CustomRequestHeaders[e];t&&this._xhr.setRequestHeader(e,t)}}_shouldSkipRequestModifications(e){return s.SkipRequestModificationForBabylonCDN&&(e.includes("preview.babylonjs.com")||e.includes("cdn.babylonjs.com"))}get onprogress(){return this._xhr.onprogress}set onprogress(e){this._xhr.onprogress=e}get readyState(){return this._xhr.readyState}get status(){return this._xhr.status}get statusText(){return this._xhr.statusText}get response(){return this._xhr.response}get responseURL(){return this._xhr.responseURL}get responseText(){return this._xhr.responseText}get responseType(){return this._xhr.responseType}set responseType(e){this._xhr.responseType=e}get timeout(){return this._xhr.timeout}set timeout(e){this._xhr.timeout=e}addEventListener(e,t,r){this._xhr.addEventListener(e,t,r)}removeEventListener(e,t,r){this._xhr.removeEventListener(e,t,r)}abort(){this._xhr.abort()}send(e){s.CustomRequestHeaders&&this._injectCustomRequestHeaders(),this._xhr.send(e)}open(e,t){for(const e of s.CustomRequestModifiers){if(this._shouldSkipRequestModifications(t))return;t=e(this._xhr,t)||t}t=(t=t.replace("file:http:","http:")).replace("file:https:","https:"),this._requestURL=t,this._xhr.open(e,t,!0)}setRequestHeader(e,t){this._xhr.setRequestHeader(e,t)}getResponseHeader(e){return this._xhr.getResponseHeader(e)}}s.CustomRequestHeaders={},s.CustomRequestModifiers=new Array,s.SkipRequestModificationForBabylonCDN=!0}}]);